<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../static/layui/css/layui.css " th:href="@{/asserts/layui/css/layui.css}">
    <link rel="stylesheet" href="../static/css/mystyle.css" th:href="@{/asserts/css/mystyle.css}">
    <link rel="stylesheet" href="../static/asserts/css/mian.css" th:href="@{/asserts/css/mian.css}">
    <title>个人博客</title>

</head>
<body class="lay-blog">
<div class="layui-layout layui-layout-admin">
    <div th:replace="commons/bar::topbar"></div>
    <div id="LAY_preview" style="">
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;text-align: center">
            <legend>我的文章</legend>
        </fieldset>
    </div>
    <div class="container-wrap">
        <div class="container">
            <div class="contar-wrap">
                <h4 class="item-title">
                    <p><i class="layui-icon layui-icon-speaker"></i>公告：<span>小小的天有大大的梦想 重重的壳裹着轻轻地仰望</span></p>
                </h4>
                <div id="list">


                </div>
                <div class="item-btn" id="pageDiv">
                </div>
            </div>
        </div>
    </div>
    <div class="footer">
        <p>
            <span>&copy; 2018</span>
            <span><a href="http://www.layui.com" target="_blank">layui.com</a></span>
            <span>MIT license</span>
        </p>
        <p><span>人生就是一场修行</span></p>
    </div>

</div>
<script src="../static/layui/layui.js" th:src="@{/asserts/layui/layui.js}"></script>
<script>

    //JavaScript代码区域
    layui.use(['element', 'jquery'], function () {
        var element = layui.element;
        var form = layui.form, $ = layui.$;

        function htmlDecode(text){
            //1.首先动态创建一个容器标签元素，如DIV
            var temp = document.createElement("div");
            //2.然后将要转换的字符串设置为这个元素的innerHTML(ie，火狐，google都支持)
            temp.innerHTML = text;
            //3.最后返回这个元素的innerText(ie支持)或者textContent(火狐，google支持)，即得到经过HTML解码的字符串了。
            var output = temp.innerText || temp.textContent;
            temp = null;
            return output;
        };

        $(document).ready(function () {

            $.ajax({
                url: '/ai/front/news',
                dataType: 'json',
                type: 'GET',
                success: function (data) {
                    console.log(data);
                    var norice_content = "";
                    for (var i=0;i<data.length;i++){
                        var showContent = htmlDecode(data[i].content).substr(0,200)+" ...";
                        var href = "front/news/"+data[i].id;
                        norice_content += "<div class=\"item\">";
                        norice_content += "      <div class=\"item-box  layer-photos-demo2 layer-photos-demo\">";
                        norice_content += "          <h3><a href="+href+">"+data[i].title +"</a></h3>";
                        norice_content += "<h5>发布于：<span>"+data[i].createTime+"</span></h5>";
                        norice_content += "<p >"+ showContent +"</p>";
                        norice_content += "</div>";
                        norice_content += "<div class=\"comment count\">";
                        norice_content += "</div>";
                        norice_content += "</div>";
                    }
                    $('#list').html(norice_content);
                },
                error:function () {
                    //alert("222222222");
                    layer.msg("获取文章列表失败");
                }
            })
        })
    });



</script>
</body>
</html>